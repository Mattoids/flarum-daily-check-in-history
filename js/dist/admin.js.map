{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@mattoid/daily-check-in-history/webpack/bootstrap","webpack://@mattoid/daily-check-in-history/webpack/runtime/compat get default export","webpack://@mattoid/daily-check-in-history/webpack/runtime/define property getters","webpack://@mattoid/daily-check-in-history/webpack/runtime/hasOwnProperty shorthand","webpack://@mattoid/daily-check-in-history/external root \"flarum.core.compat['admin/app']\"","webpack://@mattoid/daily-check-in-history/external root \"flarum.core.compat['common/components/Button']\"","webpack://@mattoid/daily-check-in-history/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@mattoid/daily-check-in-history/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@mattoid/daily-check-in-history/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@mattoid/daily-check-in-history/./src/admin/components/SendMoneyModal.ts","webpack://@mattoid/daily-check-in-history/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@mattoid/daily-check-in-history/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport extractText from 'flarum/common/utils/extractText';\n\nexport default class SendMoneyModal extends Modal {\n    range: boolean = false\n    amount: string = ''\n    email: string = ''\n    username: string = ''\n    isDisabled: boolean = false\n    // message: string = ''\n    // suspended: boolean = false\n    // lastActivity: string = ''\n    // previewCount: number | null = null\n\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans('mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card');\n    }\n\n    oncreate(vnode: any) {\n        super.oncreate(vnode);\n\n        this.refresh();\n    }\n\n    content() {\n        return m('.Modal-body', [\n            m('.Form-group', [\n              Switch.component({\n                state: this.range,\n                onchange: (value: boolean) => {\n                  this.range = value;\n                  if (this.range) {\n                    this.isDisabled = true;\n                  } else {\n                    this.isDisabled = false;\n                  }\n                },\n                disabled: this.loading,\n              }, app.translator.trans('mattoid-daily-check-in-history.admin.settings.user-all')),\n              m('.helpText', app.translator.trans('mattoid-daily-check-in-history.admin.settings.range-help')),\n            ]),\n            // m('.Form-group', [\n            //   m('label', app.translator.trans('mattoid-daily-check-in-history.admin.settings.user-group')),\n            //\n            //   m('.helpText', app.translator.trans('mattoid-daily-check-in-history.admin.settings.group-help')),\n            // ]),\n            m('.Form-group', [\n              m('label', app.translator.trans('mattoid-daily-check-in-history.admin.settings.username')),\n              m('input.FormControl', {\n                type: 'text',\n                value: this.username,\n                onchange: (event: InputEvent) => {\n                  this.username = (event.target as HTMLInputElement).value;\n                },\n                min: 0,\n                step: 0.1,\n                disabled: this.loading || this.isDisabled,\n              }),\n              m('.helpText', app.translator.trans('mattoid-daily-check-in-history.admin.settings.user-help')),\n            ]),\n            m('.Form-group', [\n              m('label', app.translator.trans('mattoid-daily-check-in-history.admin.settings.give-number')),\n              m('input.FormControl', {\n                type: 'number',\n                value: this.amount,\n                onchange: (event: InputEvent) => {\n                  this.amount = (event.target as HTMLInputElement).value;\n                },\n                min: 0,\n                step: 0.1,\n                disabled: this.loading,\n              }),\n            ]),\n            m('.Form-group', Button.component({\n                type: 'submit',\n                className: 'Button Button--primary',\n                loading: this.loading,\n                disabled: parseFloat(this.amount || '0') <= 0,\n            }, app.translator.trans('mattoid-daily-check-in-history.admin.settings.submit-give'))),\n        ]);\n    }\n\n    refresh() {\n\n    }\n\n    request(dryRun: boolean = false) {\n        return app.request<{ userMatchCount: number }>({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/give/checkin/card',\n            errorHandler: this.onerror.bind(this),\n            body: {\n                userid: this.userid,\n                username: this.username,\n                amount: this.amount,\n                range: this.range,\n                dryRun,\n            },\n        });\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n\n        this.loading = true;\n\n        this.request().then(payload => {\n            this.hide();\n\n            app.alerts.show({type: 'success'}, app.translator.trans('clarkwinkelmann-money-to-all.lib.modal.success', {\n                count: payload.userMatchCount,\n            }));\n        }).catch(() => {\n            this.loading = false;\n            m.redraw();\n        });\n    }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport SendMoneyModal from './components/SendMoneyModal';\n\napp.initializers.add('mattoid-daily-check-in-history', () => {\n\n  app.extensionData.for(\"mattoid-daily-check-in-history\")\n    .registerSetting(function () {\n      return m('.Form-group', Button.component({\n        className: 'Button',\n        onclick() {\n          app.modal.show(SendMoneyModal);\n        },\n      }, app.translator.trans('mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card')));\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.max-supplementary-checkin',\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin-requirement'),\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin'),\n      type: 'number',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.span-day-checkin',\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.span-day-checkin-requirement'),\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.span-day-checkin'),\n      type: 'switch',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.checkin-range',\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-range-requirement'),\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-range'),\n      type: 'number',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.reward-money',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.reward-money'),\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.reward-money-requirement'),\n      type: 'number',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.consumption',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.consumption'),\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.reward-money-requirement'),\n      type: 'number',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.checkin-increase',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-increase'),\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-increase-requirement'),\n      type: 'number',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.checkin-card',\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-card-requirement'),\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-card'),\n      type: 'switch',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.checkin-position',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-position'),\n      help: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-position-requirement'),\n      type: 'select',\n      options: {0 : \"小药店\", 1 : \"用户中心（日历）\"},\n      default: 0\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.min-supplementary-date',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.min-supplementary-date'),\n      default: '#2756c6',\n      type: 'date',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.checkin-color',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.checkin-color'),\n      default: '#2756c6',\n      type: 'text',\n    })\n    .registerSetting({\n      setting: 'mattoid-forum-checkin.supplementary-color',\n      label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.supplementary-color'),\n      default: '#ff9900',\n      type: 'text',\n    })\n    .registerPermission(\n      {\n        icon: 'fas fa-id-card',\n        label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.allow-supplementary-check-in'),\n        permission: 'checkin.allowSupplementaryCheckIn',\n      },\n      'moderate',\n      90\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-id-card',\n        label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.issuance-of-supplementary-cards'),\n        permission: 'checkin.issuanceOfSupplementaryCards',\n      },\n      'moderate',\n      90\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-id-card',\n        label: app.translator.trans('mattoid-daily-check-in-history.admin.settings.query-others-history'),\n        permission: 'checkin.queryOthersHistory',\n        allowGuest: true\n      }, 'view')\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","SendMoneyModal","_Modal","_this","_len","arguments","length","args","Array","_key","apply","concat","range","amount","email","username","isDisabled","create","constructor","_proto","className","title","app","trans","oncreate","vnode","this","refresh","content","_this2","m","Switch","state","onchange","value","disabled","loading","type","event","target","min","step","Button","parseFloat","request","dryRun","method","url","attribute","errorHandler","onerror","body","userid","onsubmit","_this3","preventDefault","then","payload","hide","show","count","userMatchCount","redraw","Modal","add","registerSetting","onclick","setting","help","label","options","default","registerPermission","icon","permission","allowGuest"],"sourceRoot":""}